# http各个版本之间的区别

HTTP（HyperText Transfer Protocol）是互联网上应用最广泛的协议之一，自1991年诞生以来经历了多个版本的迭代。以下是HTTP 1.0、HTTP 1.1、HTTP/2和HTTP/3的主要区别及核心改进：

---

### **1. HTTP 1.0（1996年）**
- **基本特性**：
  - **短连接**：每个请求/响应需要建立一个新的TCP连接，完成后立即关闭，高延迟。
  - **无状态**：每次请求独立，服务器不保留上下文信息。
  - **基础功能**：支持GET、POST、HEAD方法，无压缩、缓存机制简单。
- **问题**：
  - 频繁的TCP连接和关闭导致性能低下（三次握手开销大）。

---

### **2. HTTP 1.1（1999年）**
- **核心改进**：
  - **持久连接（Keep-Alive）**：默认复用TCP连接，减少重复握手开销。
  - **管道化（Pipelining）**：允许在同一个连接上发送多个请求（但响应必须按顺序返回，易阻塞）。
  - **分块传输（Chunked Transfer）**：支持流式传输，无需预先知道内容长度。
  - **缓存控制**：引入`Cache-Control`、`ETag`等头部，优化缓存策略。
  - **Host头**：支持虚拟主机（一个IP托管多个域名）。
- **遗留问题**：
  - 队头阻塞（Head-of-Line Blocking）：管道化中若前一个请求延迟，后续请求会被阻塞。
  - 头部冗余：每次请求携带大量重复头部（如Cookie）。

---

### **3. HTTP/2（2015年）**
- **核心改进**：
  - **二进制协议**：取代文本格式，解析更高效。
  - **多路复用（Multiplexing）**：在单一连接上并行传输多个请求/响应，彻底解决队头阻塞。
  - **头部压缩（HPACK）**：减少冗余头部数据。
  - **服务器推送（Server Push）**：服务器可主动推送资源（如CSS/JS）到客户端缓存。
  - **流优先级**：允许设置请求优先级，优化关键资源加载。
- **问题**：
  - 仍依赖TCP协议，可能因TCP层丢包或拥塞导致性能下降。

---

### **4. HTTP/3（2022年正式标准化）**
- **革命性变化**：
  - **基于QUIC协议**：取代TCP，运行在UDP之上，解决TCP的队头阻塞问题。
  - **零RTT连接**：对重复连接可跳过握手，显著降低延迟。
  - **多路复用增强**：即使单个数据包丢失，其他流仍可继续传输。
  - **内置加密**：QUIC默认使用TLS 1.3，安全性更高。
  - **连接迁移**：网络切换（如WiFi转4G）时连接不中断。
- **优势**：
  - 在高丢包、高延迟网络（如移动环境）下性能显著优于HTTP/2。

---

### **版本对比总结**
| 特性                | HTTP 1.0       | HTTP 1.1               | HTTP/2                 | HTTP/3                 |
|---------------------|---------------|-----------------------|------------------------|------------------------|
| **连接方式**         | 短连接         | 持久连接               | 多路复用               | QUIC多路复用           |
| **协议层**           | TCP           | TCP                   | TCP                    | UDP（QUIC）            |
| **队头阻塞**         | 严重           | 管道化部分解决         | 应用层解决，TCP层仍有  | 彻底解决               |
| **头部压缩**         | 无             | 无                    | HPACK                  | QPACK                  |
| **服务器推送**       | 不支持         | 不支持                | 支持                   | 支持                   |
| **加密**             | 可选           | 可选                  | 主流强制HTTPS          | 默认加密（TLS 1.3）    |
| **典型延迟**         | 高             | 中等                  | 低                     | 极低（尤其移动网络）   |

---

### **应用场景建议**
- **老旧系统**：仍可能使用HTTP 1.1。
- **现代Web**：HTTP/2适合大多数场景（需HTTPS）。
- **高要求环境**：HTTP/3（如视频流、实时通信）优先，但需客户端和服务端支持（如Cloudflare、Google已部署）。

HTTP/3代表了未来方向，但全面普及仍需时间（需操作系统、浏览器、服务器生态支持）。

**这篇解释更详细**

https://zhuanlan.zhihu.com/p/330300133
